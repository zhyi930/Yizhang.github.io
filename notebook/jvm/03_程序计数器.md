# 程序计数器

***
## 1 PC Register
<img src="images\img07.png" width="80%">

* 定义: **JVM中的PC寄存器是对物理寄存器的一种抽象模拟**
* 作用: 存储指向下一条指令的地址, 由执行引擎读取下一条指令
#### 介绍
<img src="images\img08.jpg" width="50%">

* 是一块很小的内存空间, 也是运行速度最快的存储区域
* 每个线程都有自已的程序计数器, 程序计数器线程私有且生命周期和线程保持一致
* **任何时间一个线程都只有一个方法在执行, 也就是当前方法. 程序计数器会存储当前线程正在执行的方法的JVM指令地址, 如果是native方法, 则是未指定值**
* 是程序控制流的指示器, 分支\循环\跳转\异常处理\线程恢复都需要依赖程序计数器
* 字节码解释器工作时就是通过改变这个计数器的值来选取下一条要执行的字节码指令
* **唯一一个没有任何OutMemoryError情况的区域**
***
## 2 两个常见问题
### (1) 为什么使用PC寄存器记录当前线程的执行地址?
* CPU需要不停的切换各个线程, 这样能够让CPU知道从哪里开始继续执行
* JVM字节码解释器就需要通过改变PC寄存器的值来明确下一条该执行怎样的字节码
### (2) PC寄存器为什么会被设定为线程私有?
为了能够准确的记录各个线程正在执行的当前字节码指令地址, 因为需要为每个线程都分配一个PC寄存器
